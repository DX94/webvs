<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <meta name="viewport" content="width=device-width">
  <link rel="canonical" href="http://backbonejs.org" />
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'>
  <title>Webvs</title>
  <style>
    body {
      font-size: 14px;
      line-height: 22px;
      font-family: 'Open Sans', Arial;
      background-color: #f4f4f4;
      color: #333333;
    }
    .interface {
      font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, sans-serif !important;
    }
    div#sidebar {
      background: #fff;
      position: fixed;
      z-index: 10;
      top: 0; left: 0; bottom: 0;
      width: 200px;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
      padding: 15px 0 30px 30px;
      border-right: 1px solid #bbb;
      box-shadow: 0 0 20px #ccc; -webkit-box-shadow: 0 0 20px #ccc; -moz-box-shadow: 0 0 20px #ccc;
    }
      a.toc_title, a.toc_title:visited {
        display: block;
        color: #2B64A6;
        font-weight: bold;
        margin-top: 15px;
      }
        a.toc_title:hover {
          text-decoration: underline;
        }
        #sidebar .version {
          font-size: 10px;
          font-weight: normal;
        }
      ul.toc_section {
        font-size: 11px;
        line-height: 14px;
        margin: 5px 0 0 0;
        padding-left: 0px;
        list-style-type: none;
        font-family: Lucida Grande;
      }
        .toc_section li {
          cursor: pointer;
          margin: 0 0 3px 0;
        }
          .toc_section li a {
            text-decoration: none;
            color: #333333;
          }
            .toc_section li a:hover {
              text-decoration: underline;
            }
    div.container {
      position: relative;
      width: 550px;
      margin: 40px 0 50px 260px;
    }
    img#logo {
      width: 450px;
      height: 80px;
    }
    p, div.container ul {
      margin: 25px 0;
      width: 550px;
    }
      p.warning {
        font-size: 12px;
        line-height: 18px;
        font-style: italic;
      }
      div.container ul {
        list-style: circle;
        padding-left: 15px;
        font-size: 13px;
        line-height: 18px;
      }
        div.container ul li {
          margin-bottom: 10px;
        }
        div.container ul.small {
          font-size: 12px;
        }
    a, a:active, a:visited {
        color: #E34B8F;
        text-decoration: none;
    }
    a:hover {
        color: #2B9EA6;
    }
    a.punch {
      display: inline-block;
      background: #4162a8;
      border-top: 1px solid #38538c;
      border-right: 1px solid #1f2d4d;
      border-bottom: 1px solid #151e33;
      border-left: 1px solid #1f2d4d;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      -ms-border-radius: 4px;
      -o-border-radius: 4px;
      border-radius: 4px;
      -webkit-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -moz-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -ms-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      -o-box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      box-shadow: inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
      color: #fff;
      font: bold 14px "helvetica neue", helvetica, arial, sans-serif;
      line-height: 1;
      margin-bottom: 15px;
      padding: 8px 0 10px 0;
      text-align: center;
      text-shadow: 0px -1px 1px #1e2d4d;
      text-decoration: none;
      width: 225px;
      -webkit-background-clip: padding-box; }
      a.punch:hover {
        -webkit-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -moz-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -ms-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        -o-box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        box-shadow: inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111111;
        cursor: pointer; }
      a.punch:active {
        -webkit-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -moz-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -ms-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        -o-box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        box-shadow: inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111111;
        margin-top: 5px; margin-bottom: 10px }
    a img {
      border: 0;
    }
    a.travis-badge {
      display: block;
    }
    h1, h2, h3, h4, h5, h6 {
      padding-top: 20px;
      color: #2B64A6;
    }
    h2 {
      font-size: 22px;
    }
    h1.banner {
        margin: 0px;
        padding: 0px;
        font-size: 4em;
        letter-spacing: -2px;
        font-weight: 300;
    }
    b.header {
      font-size: 18px;
      line-height: 35px;
    }
    span.alias {
      font-size: 14px;
      font-style: italic;
      margin-left: 20px;
    }
    table {
      margin: 15px 0 0; padding: 0;
    }
      tr, td {
        margin: 0; padding: 0;
      }
        td {
          padding: 0px 15px 5px 0;
        }
        table .rule {
          height: 1px;
          background: #ccc;
          margin: 5px 0;
        }
    code, pre, tt {
      font-family: Monaco, Consolas, "Lucida Console", monospace;
      font-size: 12px;
      line-height: 18px;
      font-style: normal;
    }
      tt {
        padding: 0px 3px;
        background: #fff;
        border: 1px solid #ddd;
        zoom: 1;
      }
      code {
        margin-left: 20px;
      }
      pre {
        font-size: 12px;
        padding: 2px 0 2px 15px;
        border: 4px solid #bbb; border-top: 0; border-bottom: 0;
        margin: 0px 0 25px;
      }
      img.example_image {
        margin: 0px auto;
      }
        img.example_retina {
          margin: 20px;
          box-shadow: 0 8px 15px rgba(0,0,0,0.4);
        }
    @media only screen and (-webkit-max-device-pixel-ratio: 1) and (max-width: 600px),
           only screen and (max--moz-device-pixel-ratio: 1) and (max-width: 600px) {
      div#sidebar {
        display: none;
      }
      img#logo {
        max-width: 450px;
        width: 100%;
        height: auto;
      }
      div.container {
        width: auto;
        margin-left: 15px;
        margin-right: 15px;
      }
        p, div.container ul {
          width: auto;
        }
    }
    @media only screen and (-webkit-min-device-pixel-ratio: 1.5) and (max-width: 640px),
          only screen and (-o-min-device-pixel-ratio: 3/2) and (max-width: 640px),
          only screen and (min-device-pixel-ratio: 1.5) and (max-width: 640px) {
      img {
        max-width: 100%;
        height: auto;
      }
      div#sidebar {
        -webkit-overflow-scrolling: initial;
        position: relative;
        width: 90%;
        height: 120px;
        left: 0;
        top: -7px;
        padding: 10px 0 10px 30px;
        border: 0;
      }
      img#logo {
        width: auto;
        height: auto;
      }
      div.container {
        margin: 0;
        width: 100%;
      }
      p, div.container ul {
        max-width: 98%;
        overflow-x: scroll;
      }
      table {
        position: relative;
      }
        tr:first-child td {
          padding-bottom: 25px;
        }
        td.text {
          line-height: 12px;
          padding: 0;
          position: absolute;
          left: 0;
          top: 48px;
        }
        tr:last-child td.text {
          top: 122px;
        }
      pre {
        overflow: scroll;
      }
    }
  </style>
</head>
<body>

  <div id="sidebar" class="interface">

    <a class="toc_title" href="#">
      Webvs <span class="version">(1.5.0)</span>
    </a>
    <ul class="toc_section">
      <li>&raquo; <a href="http://github.com/azeem/webvs">GitHub Repository</a></li>
    </ul>

    <a class="toc_title" href="#introduction">Introduction</a>

    <a class="toc_title" href="#basic-usage">Basic Usage</a>

    <a class="toc_title" href="#events">Events</a>

    <a class="toc_title" href="#webvs-main">Webvs.Main</a>
    <ul class="toc_section">
      <li>&raquo; <a href="#webvs-main-loadpreset">loadPreset</a></li>
      <li>&raquo; <a href="#webvs-main-start">start</a></li>
      <li>&raquo; <a href="#webvs-main-stop">stop</a></li>
      <li>&raquo; <a href="#webvs-main-get">get</a></li>
      <li>&raquo; <a href="#webvs-main-set">set</a></li>
      <li>&raquo; <a href="#webvs-resetcanvas">resetCanvas</a></li>
      <li>&raquo; <a href="#webvs-notifyresize">notifyResize</a></li>
      <li>&raquo; <a href="#webvs-tojson">toJSON</a></li>
      <li>&raquo; <a href="#webvs-destroy">destroy</a></li>
    </ul>

  </div>

  <div class="container">
    <h1 class="banner">Webvs</h1>
    <p>
      Webvs is a WebGL music visualization system for browsers. It has highly programmable
      visualization preset format and expression language that allows artists to create
      visual effects by layering one of several built-in rendering components. The library
      also exposes a flexible API for custom rendering components.
    </p>
    <p>
      The code is <a href="http://github.com/azeem/webvs">hosted on Github</a>. For bug report
      and discussions, please use the <a href="https://github.com/azeem/webvs/issues">Github Issues page</a>.
    </p>
    <p>
      Webvs in runtime at minimum depends on <a href="http://underscorejs.org/">Underscore.js (>= 1.5.0)</a>. Webvs also
      depends on <a href="http://backbonejs.org/#Events">Backbone Events Module</a>. If your application does not already
      use Backbone then you must include <a href="https://github.com/azeem/backbone-events">Backbone-Events</a>, which contains
      a stand alone version of the Backbone Events module. For FPS stat display, include
      <a href="https://github.com/mrdoob/stats.js">Stats.js</a>. Support for audio playback with HTML5 audio and
      <a href="http://www.schillmania.com/projects/soundmanager2/">SoundManager2</a> is currently supported.
    </p>


    <h2 id="introduction">Introduction</h2>
    <p>
      Webvs renders visualizations by layering different renderings one after the other. Each rendering is performed
      by objects called Components or Effects. Each Component type will have a different rendering behaviour which can
      be configured through the preset definitions. Some components may have sub components, in which case the rendering
      of all the subcomponents is modified/controlled in some manner by the parent. eg. EffectList, which renders a set
      of components into a separate buffer which is then blended back into the main render.
    </p>
    <p>
      A visualization Preset in Webvs is thus just a hierarchy of Components configurations, with an implied 
      EffectList (usually called Root Component or Main) at the root. When a preset is loaded, Webvs instantiates
      a hierarchy of Components with initial parameters from the Preset JSON.
    </p>
    <p>
      Component's may accept a variety of different parameters that modify their behaviour. Some components accept
      code written in an expression language (Webvs internally compiles this to Javascript or GLSL). This allows
      users tweak component's rendering behaviour in arbitrarily different and complex ways.
    </p>
    <p>
      Webvs components configurations are event driven. This allows Webvs to respond to changes in component parameters
      in real-time. Eg: Changing colors, Code etc. This feature can be used to build Live-Edit User Interfaces for presets
      development.
    </p>


    <h2 id="basic-usage">Basic Usage</h2>
    <p>
      A typical usage involves creating an Analyser and a Main object. The Analyser interfaces with your
      audio source and generates the visualization data, while the Main object serves as the primary interface 
      for controlling the visualization.
    </p>
    <pre>
var analyser = new Webvs.WebAudioAnalyser();
var webvs = new Webvs.Main({
    canvas: document.getElementById("canvas"),
    analyser: analyser,
    showStat: true
});
webvs.loadPreset({
    "clearFrame": true,
    "components": [
        {
            "type": "SuperScope",
            "source": "WAVEFORM",
            "code": {
                "perPoint": "x=i*2-1;y=v;"
            },
            "colors": ["#ffffff"]
        }
    ]
});
webvs.start();
analyser.load("music.ogg");
analyser.play();
    </pre>

    <h2 id="events">Events</h2>
    <p>
      Many object in Webvs generate and or listen to events. Webvs uses the 
      <a href="http://backbonejs.org/#Events">Backbone Events module</a> for this.
      All backbone event module functions such as <b>on</b>, <b>off</b>, <b>trigger</b>,
      <b>listenTo</b> etc. are available on these objects. Additionally most objects
      also have <b>get</b>, <b>set</b> methods for some parameters. These methods fire
      <tt>change</tt> event just like Backbone models.
    </p>
    <p id="catalaog-of-events">
      <b class="header">Catalog of Events</b><br/>
      Here is the complete list of events in Main, ResourceManager and Components.
    </p>

   <!-- Webvs.Main -->

    <h2 id="webvs-main">Webvs.Main</h2>
    <p>
      Main object is the primary interface that controls loading of presets, starting
      stopping animations, etc. It maintains the root Component and the hierarchy of
      components under it.
    </p>
    <p id="webvs-main-loadpreset">
      <b class="header">loadPreset</b>
      <code>main.loadPreset(preset)</code><br/>
      Loads a preset into this webvs instance. <b>preset</b> is an object hash that
      contains the preset. The root object should have a <b>components</b> property
      which will contain an Array for component configurations for all the components.
      All component configurations should have a <b>type</b> property containing the string
      name of the Component. Other properties are specific to each component.
    </p>
    <p>
      If you want to clear every frame of the preset, then set <b>clearFrame</b> to true
      in the root object hash.
    </p>
    <pre>
webvs.loadPreset({
    "clearFrame": true,
    "components": [
        {
            "type": "SuperScope",
            "source": "WAVEFORM",
            "code": {
                "perPoint": "x=i*2-1;y=v;"
            },
            "colors": ["#ffffff"]
        }
    ]
});      
    </pre>

    <p id="webvs-main-start">
      <b class="header">start</b>
      <code>main.start()</code><br/>
      Starts running the animation when ready. The animation may not start playing 
      immediately because preset may use external resources which needs to be 
      loaded asynchronously by the resource manager.
    </p>

    <p id="webvs-main-stop">
      <b class="header">stop</b>
      <code>main.stop()</code><br/>
      Stops the animation.
    </p>

    <p id="webvs-main-set">
      <b class="header">set</b>
      <code>main.set(attribute, value)</code><br/>
      Sets the current value of a preset property. Currently <tt>meta</tt> is the
      only supported attribute. This value can be used to store metadata, such as
      preset name or author. Eg. <tt>main.set("meta", {name: "presetname"})</tt>
    </p>

    <p id="webvs-main-get">
      <b class="header">get</b>
      <code>main.get(attribute)</code><br/>
      Gets the current value of a preset property. Eg. <tt>main.get("meta")</tt>
    </p>

    <p id="webvs-resetcanvas">
      <b class="header">resetCanvas</b>
      <code>main.resetCanvas()</code><br/>
      Resets and reinitializes all the components and canvas.
    </p>

    <p id="webvs-notifyresize">
      <b class="header">notifyResize</b>
      <code>main.notifyResize()</code><br/>
      This function should be called if the canvas element's <tt>width</tt> or <tt>height</tt>
      attribute has changed. This allows Webvs to update and resize all the buffers.
    </p>

    <p id="webvs-tojson">
      <b class="header">toJSON</b>
      <code>main.toJSON()</code><br/>
      Returns a JSON representation of the currently loaded preset.
    </p>

    <p id="webvs-destroy">
      <b class="header">destroy</b>
      <code>main.destroy()</code><br/>
      Frees up all resource.
    </p>

  </div>
</html>
