!function(){function a(){var a=$("#sc-url"),b=a.val(),c=$.ajax({url:"http://api.soundcloud.com/resolve.json",data:{client_id:h,url:b}});c.done(function(b){a.val(""),e.pause(),e.load({src:b.stream_url+"?client_id="+h}),e.play()}),c.fail(function(){alert("Unable to resolve soundcloud track")})}function b(){var a=$("#dim-factor").val(),b={width:$(window).outerWidth(),height:$(window).outerHeight()},c={width:b.width/a,height:b.height/a};$("#my-canvas").attr(c).css(b)}function c(){g=CodeMirror($("#preset-code").get(0),{value:JSON.stringify(i,void 0,2),tabSize:2})}function d(){function d(){b(),f.resetCanvas(),f.start()}b(),c(),$("#btn-play").on("click",a),$("#btn-runpreset").on("click",function(){f.loadPreset(JSON.parse(g.getValue())),f.start()}),$("#btn-panel-toggle").on("click",function(){var a=$(this),b=$("#panel");b.fadeToggle({complete:function(){b.is(":visible")?a.text("Hide Panel"):a.text("Show Panel")}})}),$("#dim-factor").on("change",d);var e;$(window).on("resize",function(){clearTimeout(e),e=setTimeout(d,100)})}var e,f,g,h="e818e8c85bb8ec3e90a9bbca23ca5e2a",i={clearFrame:!1,components:[{type:"EffectList",output:"ADDITIVE",components:[{type:"FadeOut",speed:.4},{type:"SuperScope",code:{init:"n=800",onBeat:"t=t+0.3;n=100+rand(900);",perFrame:"t=t-v*0.5",perPoint:"d=D/n;r=(i-(t*3)); x=(atan(r+d-t)*cos(r+d-t+i)); y=((i+cos(d+v*1.2))-1.5)*1.7;z=-(cos(t+i)+log(v)*cos(r*3))*3;red=cos(r)+1;blue=sin(r);green=sin(i)/2"}},{type:"DynamicMovement",enabled:!0,code:"rollingGridley",coord:"RECT"},{type:"ChannelShift",enabled:!1,onBeatRandom:!0}]},{type:"Convolution",kernel:"blur"},{type:"Convolution",kernel:"blur"},{type:"OnBeatClear"}]};$(document).ready(function(){d(),e=new Dancer,f=new Webvs({canvas:$("#my-canvas").get(0),analyser:new Webvs.DancerAdapter(e)}),f.loadPreset(i),f.start()})}();